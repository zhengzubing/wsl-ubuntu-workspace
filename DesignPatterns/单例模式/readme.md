![alt text](image.png)
双检查锁:
1. 第一次if判断的原因/锁放到if语句中的原因: 提交效率, 只读时不需要加锁
2. 第二次if判断的原因, 避免重复创建
3. 不能用, 存在问题: 指令重排后, 先申请内存, 再赋值, 再调用构造, 此步骤双线程存在问题

禁止指令重排的可以用的双检查锁版本:
![alt text](image-1.png)